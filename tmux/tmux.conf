unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Start window numbering at 1
set -g base-index 1

# Auto-rename windows to show running command (unless explicitly named)
set -g automatic-rename on

bind l select-pane -R
bind h select-pane -L
bind k select-pane -U
bind j select-pane -D

# Enter copy mode
bind ] copy-mode

# Jump to last window
bind [ last-window

setw -g mode-keys vi

# Copy mode bindings
bind-key -T copy-mode-vi Escape send-keys -X cancel
bind-key -T copy-mode-vi J send-keys -X halfpage-down
bind-key -T copy-mode-vi K send-keys -X halfpage-up

bind s set-window-option synchronize-panes

# Switch windows using fzf (prefix + w)
# #{?window_bell_flag,ðŸ””,} shows bell emoji if window has unread bell
bind-key w display-popup -E "tmux list-windows -F '#{window_index}: #{window_name}#{?window_bell_flag, ðŸ””,}' | fzf --reverse | cut -d: -f1 | xargs -I{} tmux select-window -t {}"

# Status line styling
set -g status-interval 1
set -g status-style "bg=colour236,fg=white"
set -g status-left ""
set -g status-right ""
set -g window-status-format " #I:#{=/12/â€¦:window_name} "
set -g window-status-current-format " #I:#{=/12/â€¦:window_name} "
set -g window-status-current-style "bg=blue,fg=white,bold"
set -g window-status-style "bg=default,fg=white"

# Bell monitoring - highlight windows with bells until visited
set -g monitor-bell on
set -g bell-action any
set -g visual-bell off
set -g allow-passthrough on
set -g window-status-bell-style "bg=yellow,fg=black,bold"

# Update environment variables when attaching to help 1Password CLI connection
set -g update-environment "OP_BIOMETRIC_UNLOCK_ENABLED OP_SERVICE_ACCOUNT_TOKEN"
